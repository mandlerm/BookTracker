
<h1>Add a book</h1>

<%= form_for @book, :url => books_path, :html => {:method => :post} do |f|%>

  <%= f.fields_for :category do |category| %>
    <%= category.label :name, value: "Enter or select a category" %><br />
    <%= category.text_field :name, list: "category_autocomplete" %>
    <datalist id="category_autocomplete">
      <% Category.all.distinct.each do |category| %>
        <option value="<%= category.name %>">
        <% end %>
    </datalist><br />
  <% end %>

  <%= f.label :title  %><br />
  <%= f.text_field :title %><br />

  <%= f.label :author %><br />
  <%= f.text_field :author %><br />

  <%= f.fields_for :user_books do |record| %>
    <%= record.label :rating  %><br />
    <%= record.text_field :rating %><br />

    <%= record.label :comments %><br />
    <%= record.text_field :comments %><br />

    <%= record.radio_button(:read, "0") %>
    <%= record.label(:read, "Still on the list") %>
    <%= record.radio_button(:read, "1") %>
    <%= record.label(:read, "Check it off my list!") %>
  <% end %><br />
  <%= f.submit%>
<% end %>


book {
  title => title,
  author => author,
  book_category => {
    rating => rating,
    comments => comments
  },
  category=>{
    category =>category
  }
  read => 1/0
}

"book"=>{
  "title"=>"Story of the World",
  "author"=>"Susan Bauer",
  "book_category"=>{
    "rating"=>"5",
    "comments"=>"great history book"
  },
  "category"=>{
    "category"=>"History"
  }
},
